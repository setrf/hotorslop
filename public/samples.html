<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>All Model Samples - Hot or Slop</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #2d2226;
      color: #f5f1e8;
      margin: 0;
      padding: 2rem;
    }
    h1 { text-align: center; margin-bottom: 0.5rem; }
    .subtitle { text-align: center; color: rgba(255,255,255,0.6); margin-bottom: 2rem; }
    .category { color: #ff4e00; margin: 2rem 0 1rem; font-size: 1.5rem; border-bottom: 2px solid #ff4e00; padding-bottom: 0.5rem; }
    .category.real { color: #4a9eff; border-color: #4a9eff; }
    .section { margin-bottom: 2rem; }
    .section h3 {
      color: rgba(255,255,255,0.9);
      margin: 0 0 0.75rem;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .section h3 .count { color: rgba(255,255,255,0.5); font-weight: normal; font-size: 0.85rem; }
    .grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 0.75rem;
    }
    @media (max-width: 1200px) { .grid { grid-template-columns: repeat(4, 1fr); } }
    @media (max-width: 900px) { .grid { grid-template-columns: repeat(3, 1fr); } }
    @media (max-width: 600px) { .grid { grid-template-columns: repeat(2, 1fr); } }
    .card {
      background: rgba(95, 82, 79, 0.6);
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid rgba(255,241,225,0.12);
    }
    .card img {
      width: 100%;
      height: 140px;
      object-fit: cover;
      display: block;
    }
    .loading {
      text-align: center;
      padding: 1rem;
      color: rgba(255,255,255,0.5);
      font-size: 0.8rem;
      grid-column: 1 / -1;
    }
    .back-link {
      display: inline-block;
      margin-bottom: 1rem;
      color: #4a9eff;
      text-decoration: none;
    }
    .back-link:hover { text-decoration: underline; }
    .in-use {
      display: inline-block;
      background: #22c55e;
      color: #000;
      font-size: 0.65rem;
      font-weight: 600;
      padding: 0.15rem 0.4rem;
      border-radius: 3px;
      text-transform: uppercase;
      letter-spacing: 0.02em;
    }
    .not-used {
      display: inline-block;
      background: rgba(255,255,255,0.15);
      color: rgba(255,255,255,0.5);
      font-size: 0.65rem;
      font-weight: 600;
      padding: 0.15rem 0.4rem;
      border-radius: 3px;
      text-transform: uppercase;
      letter-spacing: 0.02em;
    }
    .legend {
      display: flex;
      gap: 1.5rem;
      justify-content: center;
      margin-bottom: 1.5rem;
      font-size: 0.85rem;
      color: rgba(255,255,255,0.7);
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }
  </style>
</head>
<body>
  <a href="/" class="back-link">&larr; Back to game</a>
  <h1>All Model Samples</h1>
  <p class="subtitle">5 images from each AI model and real photo source</p>
  <div class="legend">
    <div class="legend-item"><span class="in-use">In Use</span> Used in the game</div>
    <div class="legend-item"><span class="not-used">Not Used</span> Available but not included</div>
  </div>

  <h2 class="category">AI-Generated Models (OpenFake)</h2>
  <div id="ai-models"></div>

  <h2 class="category">AI-Generated (Nano-Banana)</h2>
  <div id="nano-banana-models"></div>

  <h2 class="category">AI-Generated (Rapidata Benchmarks)</h2>
  <div id="rapidata-models"></div>

  <h2 class="category real">Real Photo Sources</h2>
  <div id="real-sources"></div>

  <script>
    const HF_API = 'https://datasets-server.huggingface.co';

    // All AI models from OpenFake dataset
    const aiModels = [
      'chroma', 'dalle-3', 'flux-1.1-pro', 'flux-amateursnapshotphotos', 'flux-mvc5000',
      'flux-realism', 'flux.1-dev', 'flux.1-schnell', 'gpt-image-1', 'hidream-i1-full',
      'ideogram-3.0', 'imagen-4.0', 'midjourney-6', 'midjourney-7', 'mystic',
      'recraft-v2', 'recraft-v3', 'sd-1.5', 'sd-1.5-dreamshaper', 'sd-1.5-epicdream',
      'sd-3.5', 'sdxl', 'sdxl-epic-realism', 'sdxl-juggernaut', 'sdxl-realvis-v5', 'sdxl-touchofrealism'
    ];

    const realSources = ['coco', 'openfake-real'];

    // Rapidata benchmark datasets
    const rapidataDatasets = [
      { id: 'Rapidata/Flux-2-pro_t2i_human_preference', name: 'Flux-2-pro', rows: 44857 },
      { id: 'Rapidata/Seedream-3_t2i_human_preference', name: 'Seedream-3', rows: 60030 },
      { id: 'Rapidata/Imagen-4-ultra-24-7-25_t2i_human_preference', name: 'Imagen-4-ultra', rows: 55876 },
      { id: 'Rapidata/Recraft-v3-24-7-25_t2i_human_preference', name: 'Recraft-v3', rows: 65931 },
    ];

    // Models/datasets actually used in the game
    // OpenFake filtering: only models starting with 'real', 'imagen', 'gpt', 'flux'
    // AND not in excluded list: ['gpt-image-1', 'flux.1-schnell', 'imagen-3.0-002', 'imagen-4.0', 'flux.1-dev']
    const usedOpenFakeModels = new Set([
      'flux-1.1-pro', 'flux-amateursnapshotphotos', 'flux-mvc5000', 'flux-realism'
    ]);
    const usedRapidataDatasets = new Set(rapidataDatasets.map(d => d.name));

    // Create sections
    const aiContainer = document.getElementById('ai-models');
    aiModels.forEach(model => {
      const badge = usedOpenFakeModels.has(model) ? '<span class="in-use">In Use</span>' : '<span class="not-used">Not Used</span>';
      aiContainer.innerHTML += `
        <div class="section">
          <h3>${model} ${badge} <span class="count" id="count-${model}"></span></h3>
          <div id="model-${model}" class="grid"><div class="loading">Loading...</div></div>
        </div>
      `;
    });

    const nanoBananaContainer = document.getElementById('nano-banana-models');
    nanoBananaContainer.innerHTML = `
      <div class="section">
        <h3>gemini-2.5-flash <span class="in-use">In Use</span> <span class="count" id="count-gemini"></span></h3>
        <div id="model-gemini" class="grid"><div class="loading">Loading...</div></div>
      </div>
    `;

    // Create Rapidata sections
    const rapidataContainer = document.getElementById('rapidata-models');
    rapidataDatasets.forEach(dataset => {
      const slug = dataset.name.toLowerCase().replace(/[^a-z0-9]/g, '-');
      const badge = usedRapidataDatasets.has(dataset.name) ? '<span class="in-use">In Use</span>' : '<span class="not-used">Not Used</span>';
      rapidataContainer.innerHTML += `
        <div class="section">
          <h3>${dataset.name} ${badge} <span class="count" id="count-rapidata-${slug}"></span></h3>
          <div id="model-rapidata-${slug}" class="grid"><div class="loading">Loading...</div></div>
        </div>
      `;
    });

    const realContainer = document.getElementById('real-sources');
    realContainer.innerHTML = `
      <div class="section">
        <h3>COCO-Caption2017 <span class="in-use">In Use</span> <span class="count" id="count-coco"></span></h3>
        <div id="model-coco" class="grid"><div class="loading">Loading...</div></div>
      </div>
      <div class="section">
        <h3>OpenFake Real <span class="in-use">In Use</span> <span class="count" id="count-openfake-real"></span></h3>
        <div id="model-openfake-real" class="grid"><div class="loading">Loading...</div></div>
      </div>
    `;

    // Fetch all OpenFake data and group by model
    async function fetchAllOpenFakeModels() {
      try {
        // Fetch multiple large batches from different offsets
        const batches = await Promise.all([
          fetch(`${HF_API}/rows?dataset=Anonymous460/OpenFake&config=default&split=test&offset=0&limit=1000`),
          fetch(`${HF_API}/rows?dataset=Anonymous460/OpenFake&config=default&split=test&offset=5000&limit=1000`),
          fetch(`${HF_API}/rows?dataset=Anonymous460/OpenFake&config=default&split=test&offset=10000&limit=1000`),
          fetch(`${HF_API}/rows?dataset=Anonymous460/OpenFake&config=default&split=test&offset=15000&limit=1000`),
          fetch(`${HF_API}/rows?dataset=Anonymous460/OpenFake&config=default&split=test&offset=20000&limit=1000`)
        ]);

        const allData = await Promise.all(batches.map(r => r.json()));

        // Group images by model
        const byModel = {};
        const realImages = [];

        allData.forEach(data => {
          (data.rows || []).forEach(r => {
            const row = r.row;
            if (row.label === 'fake' && row.model && row.image?.src) {
              if (!byModel[row.model]) byModel[row.model] = [];
              byModel[row.model].push(row.image.src);
            } else if (row.label === 'real' && row.image?.src) {
              realImages.push(row.image.src);
            }
          });
        });

        console.log('Models found:', Object.keys(byModel));

        // Render each model
        aiModels.forEach(model => {
          const container = document.getElementById(`model-${model}`);
          const countEl = document.getElementById(`count-${model}`);
          const images = byModel[model] || [];

          if (images.length === 0) {
            container.innerHTML = '<div class="loading">No samples in fetched data</div>';
            countEl.textContent = '(0 found)';
          } else {
            countEl.textContent = `(${images.length} found)`;
            container.innerHTML = images.slice(0, 5).map(src => `
              <div class="card"><img src="${src}" alt="" loading="lazy"></div>
            `).join('');
          }
        });

        // Render OpenFake real
        const realContainer = document.getElementById('model-openfake-real');
        const realCountEl = document.getElementById('count-openfake-real');
        if (realImages.length === 0) {
          realContainer.innerHTML = '<div class="loading">No samples found</div>';
          realCountEl.textContent = '(0 found)';
        } else {
          realCountEl.textContent = `(${realImages.length} found)`;
          realContainer.innerHTML = realImages.slice(0, 5).map(src => `
            <div class="card"><img src="${src}" alt="" loading="lazy"></div>
          `).join('');
        }

      } catch (err) {
        console.error('OpenFake fetch error:', err);
      }
    }


    // Fetch Nano-Banana (Gemini)
    async function fetchNanoBanana() {
      const container = document.getElementById('model-gemini');
      const countEl = document.getElementById('count-gemini');

      try {
        const offset = Math.floor(Math.random() * 9000);
        const rowsUrl = `${HF_API}/rows?dataset=bitmind/nano-banana&config=default&split=train&offset=${offset}&limit=10`;

        const res = await fetch(rowsUrl);
        if (!res.ok) {
          throw new Error(`HTTP ${res.status}`);
        }

        const data = await res.json();
        const images = (data.rows || [])
          .map(r => r.row?.image?.src)
          .filter(Boolean)
          .slice(0, 5);

        if (images.length === 0) {
          container.innerHTML = '<div class="loading">No images found</div>';
          countEl.textContent = '(0 found)';
        } else {
          countEl.textContent = `(${images.length} found)`;
          container.innerHTML = images.map(src => `
            <div class="card"><img src="${src}" alt="" loading="lazy"></div>
          `).join('');
        }
      } catch (err) {
        console.error('Nano-Banana fetch error:', err);
        container.innerHTML = `<div class="loading">Error: ${err.message}</div>`;
        countEl.textContent = '(error)';
      }
    }

    // Fetch COCO
    async function fetchCoco() {
      const container = document.getElementById('model-coco');
      const countEl = document.getElementById('count-coco');

      try {
        const offset = Math.floor(Math.random() * 40000);
        const rowsUrl = `${HF_API}/rows?dataset=lmms-lab/COCO-Caption2017&config=default&split=val&offset=${offset}&limit=10`;

        const res = await fetch(rowsUrl);
        if (!res.ok) {
          throw new Error(`HTTP ${res.status}`);
        }

        const data = await res.json();
        const images = (data.rows || [])
          .map(r => r.row?.image?.src)
          .filter(Boolean)
          .slice(0, 5);

        if (images.length === 0) {
          container.innerHTML = '<div class="loading">No images found</div>';
          countEl.textContent = '(0 found)';
        } else {
          countEl.textContent = `(${images.length} found)`;
          container.innerHTML = images.map(src => `
            <div class="card"><img src="${src}" alt="" loading="lazy"></div>
          `).join('');
        }
      } catch (err) {
        console.error('COCO fetch error:', err);
        container.innerHTML = `<div class="loading">Error: ${err.message}</div>`;
        countEl.textContent = '(error)';
      }
    }

    // Fetch Rapidata datasets
    async function fetchRapidata() {
      for (const dataset of rapidataDatasets) {
        const slug = dataset.name.toLowerCase().replace(/[^a-z0-9]/g, '-');
        const container = document.getElementById(`model-rapidata-${slug}`);
        const countEl = document.getElementById(`count-rapidata-${slug}`);

        try {
          const offset = Math.floor(Math.random() * Math.max(dataset.rows - 10, 0));
          const rowsUrl = `${HF_API}/rows?dataset=${encodeURIComponent(dataset.id)}&config=default&split=train&offset=${offset}&limit=10`;

          const res = await fetch(rowsUrl);
          if (!res.ok) {
            throw new Error(`HTTP ${res.status}`);
          }

          const data = await res.json();
          // Extract images from pairwise comparison format (image1, image2)
          const images = [];
          (data.rows || []).forEach(r => {
            if (r.row?.image1?.src) images.push(r.row.image1.src);
            if (r.row?.image2?.src) images.push(r.row.image2.src);
          });

          if (images.length === 0) {
            container.innerHTML = '<div class="loading">No images found</div>';
            countEl.textContent = '(0 found)';
          } else {
            countEl.textContent = `(${images.length} found)`;
            container.innerHTML = images.slice(0, 5).map(src => `
              <div class="card"><img src="${src}" alt="" loading="lazy"></div>
            `).join('');
          }
        } catch (err) {
          console.error(`Rapidata ${dataset.name} fetch error:`, err);
          container.innerHTML = `<div class="loading">Error: ${err.message}</div>`;
          countEl.textContent = '(error)';
        }
      }
    }

    // Load all
    fetchAllOpenFakeModels();
    fetchNanoBanana();
    fetchCoco();
    fetchRapidata();
  </script>
</body>
</html>
