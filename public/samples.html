<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Model Samples - Hot or Slop</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #2d2226;
      color: #f5f1e8;
      margin: 0;
      padding: 2rem;
    }
    h1 {
      text-align: center;
      margin-bottom: 0.5rem;
    }
    .subtitle {
      text-align: center;
      color: rgba(255,255,255,0.6);
      margin-bottom: 2rem;
    }
    .section {
      margin-bottom: 3rem;
    }
    .section h2 {
      color: #ff4e00;
      border-bottom: 1px solid rgba(255,241,225,0.2);
      padding-bottom: 0.5rem;
      margin-bottom: 1rem;
    }
    .section h2.real {
      color: #4a9eff;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 1rem;
    }
    @media (max-width: 1200px) {
      .grid { grid-template-columns: repeat(3, 1fr); }
    }
    @media (max-width: 768px) {
      .grid { grid-template-columns: repeat(2, 1fr); }
    }
    .card {
      background: rgba(95, 82, 79, 0.6);
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(255,241,225,0.12);
    }
    .card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      display: block;
    }
    .card .info {
      padding: 0.6rem;
      font-size: 0.75rem;
    }
    .card .prompt {
      color: rgba(255,255,255,0.7);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .loading {
      text-align: center;
      padding: 2rem;
      color: rgba(255,255,255,0.6);
      grid-column: 1 / -1;
    }
    .back-link {
      display: inline-block;
      margin-bottom: 1rem;
      color: #4a9eff;
      text-decoration: none;
    }
    .back-link:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <a href="/" class="back-link">&larr; Back to game</a>
  <h1>Model Samples</h1>
  <p class="subtitle">5 images from each AI model and real photo source</p>

  <h2 style="color:#ff4e00;margin-top:2rem;">AI-Generated Models</h2>

  <div class="section">
    <h2>Imagen</h2>
    <div id="imagen" class="grid"><div class="loading">Loading...</div></div>
  </div>

  <div class="section">
    <h2>GPT (DALL-E)</h2>
    <div id="gpt" class="grid"><div class="loading">Loading...</div></div>
  </div>

  <div class="section">
    <h2>Flux</h2>
    <div id="flux" class="grid"><div class="loading">Loading...</div></div>
  </div>

  <div class="section">
    <h2>Gemini 2.5 Flash (Nano-Banana)</h2>
    <div id="gemini" class="grid"><div class="loading">Loading...</div></div>
  </div>

  <h2 style="color:#4a9eff;margin-top:3rem;">Real Photo Sources</h2>

  <div class="section">
    <h2 class="real">COCO-Caption2017</h2>
    <div id="coco" class="grid"><div class="loading">Loading...</div></div>
  </div>

  <div class="section">
    <h2 class="real">OpenFake Real</h2>
    <div id="openfake-real" class="grid"><div class="loading">Loading...</div></div>
  </div>

  <script>
    const HF_API = 'https://datasets-server.huggingface.co';

    const sources = {
      'imagen': {
        id: 'Anonymous460/OpenFake',
        config: 'default',
        split: 'test',
        filter: row => row.label === 'fake' && row.model && row.model.toLowerCase().startsWith('imagen'),
        transform: row => ({ src: row.image?.src, prompt: row.prompt })
      },
      'gpt': {
        id: 'Anonymous460/OpenFake',
        config: 'default',
        split: 'test',
        filter: row => row.label === 'fake' && row.model && row.model.toLowerCase().startsWith('gpt'),
        transform: row => ({ src: row.image?.src, prompt: row.prompt })
      },
      'flux': {
        id: 'Anonymous460/OpenFake',
        config: 'default',
        split: 'test',
        filter: row => row.label === 'fake' && row.model && row.model.toLowerCase().startsWith('flux'),
        transform: row => ({ src: row.image?.src, prompt: row.prompt })
      },
      'gemini': {
        id: 'bitmind/nano-banana',
        config: 'default',
        split: 'train',
        filter: row => row.image?.src,
        transform: row => ({ src: row.image?.src, prompt: 'AI-generated image' })
      },
      'coco': {
        id: 'lmms-lab/COCO-Caption2017',
        config: 'default',
        split: 'val',
        filter: row => row.image?.src,
        transform: row => ({ src: row.image?.src, prompt: Array.isArray(row.answer) ? row.answer[0] : row.question || '' })
      },
      'openfake-real': {
        id: 'Anonymous460/OpenFake',
        config: 'default',
        split: 'test',
        filter: row => row.label === 'real' && row.image?.src,
        transform: row => ({ src: row.image?.src, prompt: row.prompt })
      }
    };

    async function fetchSamples(key, count = 5) {
      const ds = sources[key];
      const container = document.getElementById(key);

      try {
        const totalRows = key === 'gemini' ? 9457 : key === 'coco' ? 40504 : 27543;

        // Fetch more rows to account for filtering
        const limit = count * 20;
        const offset = Math.floor(Math.random() * Math.max(totalRows - limit, 1));

        const rowsUrl = `${HF_API}/rows?dataset=${ds.id}&config=${ds.config}&split=${ds.split}&offset=${offset}&limit=${limit}`;
        const rowsRes = await fetch(rowsUrl);
        const rowsData = await rowsRes.json();

        const samples = (rowsData.rows || [])
          .map(r => r.row)
          .filter(ds.filter)
          .slice(0, count)
          .map(ds.transform);

        if (samples.length === 0) {
          container.innerHTML = '<div class="loading">No samples found - try refreshing</div>';
          return;
        }

        container.innerHTML = samples.map(s => `
          <div class="card">
            <img src="${s.src}" alt="" loading="lazy">
            <div class="info">
              <div class="prompt">${s.prompt || 'No description'}</div>
            </div>
          </div>
        `).join('');
      } catch (err) {
        container.innerHTML = `<div class="loading">Error: ${err.message}</div>`;
      }
    }

    // Load all samples
    Object.keys(sources).forEach(key => fetchSamples(key, 5));
  </script>
</body>
</html>
